<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamHarbour - Business Dashboard</title>
    <link rel="stylesheet" href="css/styles.css"> <link rel="stylesheet" href="css/themes.css"> <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <script> checkLoginStatus(); </script>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <div class="logo">üè¢ DreamHarbour</div>
                <div class="user-info">
                    <strong id="userName">Welcome!</strong>
                    <span id="userRole">Administrator</span>
                </div>
            </div>
            <div class="header-right">
                <span class="nav-link-disabled">‚öôÔ∏è Settings (Coming Soon)</span>
                <button class="btn btn-secondary" onclick="exportDashboardPDF()">üì• Export Report</button>
                <button class="btn btn-primary" onclick="logout()">üö™ Logout</button>
            </div>
        </div>

        <div class="content">
            <div class="quick-actions">
                <button class="action-btn" onclick="window.location.href='invoices.html'">
                    <span class="action-icon">üìä</span>
                    Invoice Management
                </button>
                <button class="action-btn" onclick="window.location.href='settings.html'">
                    <span class="action-icon">‚öôÔ∏è</span>
                    Configuration & Services
                </button>
                <button class="action-btn" onclick="navigateTo('view-reports')">
                    <span class="action-icon">üìã</span>
                    View Reports
                </button>
            </div>

            <div class="section-header">
                <h2 class="section-title">Quick Stats</h2>
                <div class="search-filter-group">
                    <select id="dateRange" class="date-filter" onchange="filterByDate()">
                        <option value="today">Today</option>
                        <option value="thisweek">This Week</option>
                        <option value="thismonth" selected>This Month</option>
                        <option value="custom">Custom Range</option>
                    </select>
                    <input type="text" id="searchDashboard" class="search-box" placeholder="üîç Search...">
                </div>
            </div>

            <div class="comparison-grid">
                <div class="comparison-card">
                    <div class="comparison-label">Today vs Yesterday</div>
                    <div class="comparison-values">
                        <div>
                            <div class="comparison-value" id="todayRevenue">‚Çπ0</div>
                            <div style="font-size: 11px; color: #999;">Today</div>
                        </div>
                        <div class="comparison-arrow">‚Üí</div>
                        <div>
                            <div class="comparison-value" id="yesterdayRevenue">‚Çπ0</div>
                            <div style="font-size: 11px; color: #999;">Yesterday</div>
                        </div>
                    </div>
                </div>

                <div class="comparison-card">
                    <div class="comparison-label">This Month vs Last Month</div>
                    <div class="comparison-values">
                        <div>
                            <div class="comparison-value" id="thisMonthRevenue">‚Çπ0</div>
                            <div style="font-size: 11px; color: #999;">This Month</div>
                        </div>
                        <div class="comparison-arrow">‚Üí</div>
                        <div>
                            <div class="comparison-value" id="lastMonthRevenue">‚Çπ0</div>
                            <div style="font-size: 11px; color: #999;">Last Month</div>
                        </div>
                    </div>
                </div>

                <div class="comparison-card">
                    <div class="comparison-label">Growth Percentage</div>
                    <div class="comparison-value" id="growthPercentage">+0%</div>
                    <div style="font-size: 11px; color: #1e40af;">üìà Month over Month</div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Revenue</div>
                    <div class="stat-value" id="totalRevenue">‚Çπ0</div>
                    <div class="stat-change" id="revenueChange">+0% from last month</div>
                </div>

                <div class="stat-card">
                    <div class="stat-label">GST Collected</div>
                    <div class="stat-value" id="totalGST">‚Çπ0</div>
                    <div class="stat-change">18% of total</div>
                </div>

                <div class="stat-card">
                    <div class="stat-label">Total Invoices</div>
                    <div class="stat-value" id="totalInvoices">0</div>
                    <div class="stat-change" id="invoiceChange">+0 this month</div>
                </div>

                <div class="stat-card">
                    <div class="stat-label">Total Customers</div>
                    <div class="stat-value" id="totalCustomers">0</div>
                    <div class="stat-change" id="customerChange">+0 new this month</div>
                </div>
            </div>

            <div class="widgets-grid">
                <div class="widget">
                    <div class="widget-title">üìà Monthly Revenue Trend (Last 6 Months)</div>
                    <div class="widget-chart">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>

                <div class="widget">
                    <div class="widget-title">üéØ Service Breakdown (Revenue)</div>
                    <ul class="service-list" id="serviceList">
                        <li class="service-item">
                            <span class="service-name">Loading...</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="section-header">
                <h2 class="section-title">üí≥ Payment Status</h2>
            </div>
            <div class="payment-status">
                <div class="payment-card">
                    <div class="payment-number" id="pendingPayments">0</div>
                    <div class="payment-label">Invoices Pending Payment</div>
                </div>
                <div class="payment-card">
                    <div class="payment-number" id="outstandingAmount">‚Çπ0</div>
                    <div class="payment-label">Total Outstanding</div>
                </div>
                <div class="payment-card">
                    <div class="payment-number" id="collectionRate">0%</div>
                    <div class="payment-label">Collection Rate</div>
                </div>
            </div>

            <div class="widget" style="margin-bottom: 30px;">
                <div class="widget-title">üìä Payment Collection Trend</div>
                <div class="widget-chart">
                    <canvas id="paymentChart"></canvas>
                </div>
            </div>

            <div class="section-header">
                <h2 class="section-title">‚è≥ Pending/Draft Invoices</h2>
            </div>
            <div class="pending-list" id="pendingInvoicesList">
                <div class="empty-state">
                    <div class="empty-state-icon">üì≠</div>
                    <div class="empty-state-text">No pending invoices</div>
                </div>
            </div>

            <div class="section-header">
                <h2 class="section-title">üìÑ Recent Invoices</h2>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Invoice ID</th>
                            <th>Customer</th>
                            <th>Amount</th>
                            <th>GST</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="recentInvoicesList">
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 30px;">
                                <div class="loading">
                                    <div class="spinner"></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="section-header">
                <h2 class="section-title">üë• Multi-User Activity</h2>
            </div>
            <div class="widget">
                <ul class="activity-list" id="activityLog">
                    <li class="activity-item">
                        <div class="activity-icon">‚è≥</div>
                        <div class="activity-content">
                            <div class="activity-title">Loading activity...</div>
                            <div class="activity-time">Just now</div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> <script src="js/config.js"></script> <script src="js/common.js"></script> <script src="js/dashboard.js"></script>
</body>
</html>